/*
 * This file was generated by the Gradle "init" task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.3/userguide/java_library_plugin.html
 */
 
apply plugin: "java" //Java的JDK
apply plugin: "eclipse" //eclipse项目插件
apply plugin: "war" //项目构建输出war
apply plugin: "eclipse-wtp" //web传输层插件
apply plugin: "java-library" //Java Library插件通过提供有关Java库的特定知识来扩展Java插件的功能
apply plugin: "maven" //Maven插件
apply plugin: "maven-publish" //Maven 发布插件

apply from: "version.gradle"

//group和version分别为项目的所在组和版本信息。和Maven类似，而artifactId在gradle则是项目的name，值保存在settings.gradle文件的rootProject.name中。
group = "com.xh.mvc" //坐标 
version = "0.0.1-SNAPSHOT" //版本
description = "gradle-mvc" //描述

sourceCompatibility = "1.8" //Jdk版本 指定编码环境
targetCompatibility ="1.8" //Jdk版本 指定编译环境
buildDir="D:/Eclipse/新建文件夹" //war 输出路径 
webAppDirName = "webapp"  //设置 WebApp 根目录  


//禁止eclipse下载源码
eclipse {
    classpath {
		downloadSources = false
		downloadJavadoc = false
    }
}

war {
    baseName = "gradle-mvc" //war名称
    version = "0.0.1.mvc-SNAPSHOT"//war版本号:baseName+"-"+version
}

//创建Java文档，配置了这个任务后，执行gradle的javadoc命令，可以自动生产javaDoc文档。前提当然你自己有给类和方法按规范添加注解。
task createJavadoc(type: Javadoc)  {
  source = sourceSets.main.allJava
}

task printStringClass{
    println "当前版本是${versionName}"
}



//repositories仓库
repositories {
	//jcenter() 默认仓库
	//mavenLocal()//添加Maven本地资源库
  	//mavenCentral()//添加Maven中央资源库，表示会从Maven中央库获取数据。
	//自定义仓库
	maven{
    	url "http://central.maven.org/maven2/"
    }
}

//声明外部属性一
ext.druidVersion = "1.1.10"
ext.fastjsonVersion = "1.2.56"

//添加依赖库
dependencies {
	//声明外部属性二
    def springVersion = "4.3.3.RELEASE"
    //声明外部属性三
    ext{
        hibernateVersion = "5.3.3.Final"
    }

	
	compile group: "org.apache.commons", name: "commons-lang3", version: "3.8.1"
	compile group: "commons-io", name: "commons-io", version: "2.6"

   // spring library
    compile group: "org.springframework", name: "spring-aop", version: "$springVersion"
    compile group: "org.springframework", name: "spring-aspects", version: "$springVersion"
    compile group: "org.springframework", name: "spring-beans", version: "$springVersion"
    compile group: "org.springframework", name: "spring-context", version: "$springVersion"
    compile group: "org.springframework", name: "spring-context-support", version: "$springVersion"
    compile group: "org.springframework", name: "spring-core", version: "$springVersion"
    compile group: "org.springframework", name: "spring-expression", version: "$springVersion"
    compile group: "org.springframework", name: "spring-jdbc", version: "$springVersion"
    compile group: "org.springframework", name: "spring-orm", version: "$springVersion"
    compile group: "org.springframework", name: "spring-test", version: "$springVersion"
    compile group: "org.springframework", name: "spring-tx", version: "$springVersion"
    compile group: "org.springframework", name: "spring-web", version: "$springVersion"
    compile group: "org.springframework", name: "spring-webmvc", version: "$springVersion"
	compile group: "org.hibernate", name: "hibernate-entitymanager", version: hibernateVersion
	compile group: "org.hibernate", name: "hibernate-ehcache", version: hibernateVersion
	compile group: "com.alibaba", name: "druid", version: druidVersion
	compile group: "com.alibaba", name: "fastjson", version: fastjsonVersion
	compile group: "mysql", name: "mysql-connector-java", version: "8.0.13"
	compile group: "log4j", name: "log4j", version: "1.2.17"
	compile group: "org.slf4j", name: "slf4j-api", version: "1.7.25"
	
	testCompile group: "org.slf4j", name: "slf4j-log4j12", version: "1.7.25"
	testCompile group: "org.slf4j", name: "slf4j-simple", version: "1.7.25"
	testCompile group: "junit", name: "junit", version: "4.12"
	
	compile group: "javax.servlet", name: "javax.servlet-api", version: "3.1.0"
	compile group: "javax.servlet", name: "jstl", version: "1.2"
	compile group: "javax.servlet.jsp", name: "javax.servlet.jsp-api", version: "2.2.1"
}

publishing {
    publications {
        maven(MavenPublication) {
            from components.java
        }
    }
}

//设置charset字符编码
tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}